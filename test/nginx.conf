worker_processes auto;

events {}

http {
	include /etc/nginx/mime.types;

	server_tokens off;

	server {
		server_name test.vanyauhalin.me;
		listen 80;

		location / {
			return 301 https://$server_name$request_uri;
		}

		location /.well-known/acme-challenge {
			root /var/www/test.vanyauhalin.me;
		}
	}

	server {
		server_name test.vanyauhalin.me;
		listen 443 ssl;

		ssl_certificate /etc/acme/test.vanyauhalin.me/fullchain.pem;
		ssl_certificate_key /etc/acme/test.vanyauhalin.me/privkey.pem;
		ssl_trusted_certificate /etc/acme/test.vanyauhalin.me/chain.pem;

		location / {
			root /etc/nginx/html;
		}
	}
}
